<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>rust</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="org-default.css" />
</head>
<body>
<div id="content" class="container">
<nav aria-label="breadcrumb" style="--pico-nav-breadcrumb-divider: '|';" id="org92dab39">
<ul class="org-ul">
<li><a href="index.html#ID-3a34d6d7-6f37-4573-b20e-3c93894e54ac">üè†</a></li>
<li><a href="site_map.html#ID-30ea5e38-9b41-4bcd-8631-76821e93e294">üó∫</a></li>
</ul>
</nav>
<div id="outline-container-org75414a1" class="outline-2">
<h2 id="org75414a1">rust</h2>
<div class="outline-text-2" id="text-org75414a1">
<ul class="org-ul">
<li><a href="https://github.com/rust-lang/rust/issues/93740#issuecomment-1041391284">https://github.com/rust-lang/rust/issues/93740#issuecomment-1041391284</a> futex/mutex comparisons</li>
<li>rustc uses stacker crate for segmented stacks to avoid stack overflow</li>
<li><code>cargo test -- --nocapture</code> for <code>println!()</code></li>
<li>rls removed in 1.65 for rust-analyzer</li>
<li>HashTable uses SwissTable(DoS resistance)
<ul class="org-ul">
<li><a href="https://morestina.net/blog/1843/the-stable-hashmap-trap">conflicts with other hashers</a> like fxhash on insertion. Use random init state.</li>
</ul></li>
<li><a href="https://rust-lang.github.io/api-guidelines/checklist.html">https://rust-lang.github.io/api-guidelines/checklist.html</a></li>
<li>reference counting can be checked by <a href="https://github.com/matthieu-m/static-rc">statically</a></li>
<li>default allocator can be changed to jemalloc to avoid heap fragmentation</li>
<li>cargo feature flag propagation can break for not additive features
<ul class="org-ul">
<li>libraries could use <code>RUSTFLAGS='--cfg feature_name="FEATURE_VAL"'</code> and a <code>build.rs</code> like the curve25519-dalek crate (cross compilation?)</li>
</ul></li>
<li><code>cargo update -p PACKAGE --precise VERSION"</code> to pin Cargo.lock.</li>
<li><code>cargo tree</code> for dependency tree visual</li>
<li><code>CROSS_CONTAINER_ENGINE=podman cross build --target x86_64-unknown-freebsd</code>
<ul class="org-ul">
<li>freebsd tests only run on qemu runner</li>
<li>set the image tag for newer cross</li>
</ul></li>
</ul>
<div class="org-src-container">
<pre class="src src-toml" id="org5634042">[target.x86_64-unknown-freebsd]
image = "ghcr.io/cross-rs/x86_64-unknown-freebsd:main"
#runner = "qemu-user"
</pre>
</div>
<ul class="org-ul">
<li>rust-toolchain.toml to set nightly/beta and components like llvm-tools-preview</li>
<li>cargo release profile</li>
</ul>
<div class="org-src-container">
<pre class="src src-toml" id="org2978fb8">[profile.release]
lto = true
codegen-units = 1 # reduce parallel codegen for increased optimization
strip = true
opt-level = "z" # smallest binary instead of speed
panic = "abort"
</pre>
</div>
</div>
</div>
</div>
</body>
</html>
