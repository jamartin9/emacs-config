<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>steam</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="org-default.css" />
</head>
<body>
<div id="content" class="container content">
<div id="outline-container-orgdefdb73" class="outline-2">
<h2 id="orgdefdb73">Steam</h2>
<div class="outline-text-2" id="text-orgdefdb73">
<ul class="org-ul">
<li><a href="https://gitlab.com/Mr_Goldberg/goldberg_emulator">steam emulator</a></li>
</ul>
</div>
<div id="outline-container-org27f927d" class="outline-3">
<h3 id="org27f927d">steam proton notes</h3>
<div class="outline-text-3" id="text-org27f927d">
<ul class="org-ul">
<li>pressure vessel added in &gt; 5.10
<ul class="org-ul">
<li>conflicting glibc version for bash link so had to revert/build custom</li>
</ul></li>
<li><a href="https://github.com/ValveSoftware/steam-for-linux/issues/1890">does not respect XDG vars</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org95542a9" class="outline-2">
<h2 id="org95542a9">Lutris</h2>
<div class="outline-text-2" id="text-org95542a9">
<ul class="org-ul">
<li>installers battle.net</li>
</ul>
</div>
</div>
<div id="outline-container-org357116d" class="outline-2">
<h2 id="org357116d">Protonfixes for some games</h2>
<div class="outline-text-2" id="text-org357116d">
</div>
<div id="outline-container-org637fe8c" class="outline-3">
<h3 id="org637fe8c">Link localfixes</h3>
<div class="outline-text-3" id="text-org637fe8c">
<div class="org-src-container">
<pre class="src src-elisp" id="org5ef28a9">(ignore-errors (let* ((proton-dir (concat (if (getenv "XDG_CONFIG_HOME") (file-name-as-directory (getenv "XDG_CONFIG_HOME"))
				     (file-name-as-directory (concat (file-name-as-directory (getenv "HOME")) ".config")))
				   "protonfixes"))
		      (localfixes-dir (concat (file-name-as-directory proton-dir) "localfixes")))
  (if (not (or (file-exists-p localfixes-dir) (file-symlink-p localfixes-dir)))
      (progn (make-directory localfixes-dir 1)
	     (set-file-modes localfixes-dir #o700)))
  (if (not (or (file-exists-p (concat (file-name-as-directory localfixes-dir) "7110.py"))
	       (file-symlink-p (concat (file-name-as-directory localfixes-dir) "7110.py"))))
      (make-symbolic-link (concat (file-name-directory (or load-file-name buffer-file-name)) "7110.py")
			  (concat (file-name-as-directory localfixes-dir) "7110.py") 1))
  (if (not (or (file-exists-p (concat (file-name-as-directory localfixes-dir) "22380.py"))
	       (file-symlink-p (concat (file-name-as-directory localfixes-dir) "22380.py"))))
      (make-symbolic-link (concat (file-name-directory (or load-file-name buffer-file-name)) "22380.py")
			  (concat (file-name-as-directory localfixes-dir) "22380.py") 1))
  ))
</pre>
</div>
</div>
</div>
<div id="outline-container-org58b7dc2" class="outline-3">
<h3 id="org58b7dc2">Jade Empire (process affinity)</h3>
<div class="outline-text-3" id="text-org58b7dc2">
<div class="org-src-container">
<pre class="src src-python" id="orge580bc0">""" Game fix Jade Empire: Special Edition
"""
#pylint: disable=C0103

import threading
import os
import subprocess
from protonfixes.logger import log

def _taskset():
    """Use taskset to set mask of JadeEmpire.exe"""
    # avoiding an external library as proc should be available on linux
    again = True
    badexes = ['JadeEmpire.exe']
    while again:
	pids = [pid for pid in os.listdir('/proc') if pid.isdigit()]
	for pid in pids:
	    try:
		with open(os.path.join('/proc', pid, 'cmdline'), 'rb') as proc_cmd:
		    cmdline = proc_cmd.read()
		    for exe in badexes:
			if exe in cmdline.decode():
			    mask = os.sched_getaffinity(pid)
			    while mask != {0} :
				mask = os.sched_getaffinity(pid)
			    res = os.sched_setaffinity(pid, {0,1,2,3})
			    again = False
	    except IOError:
		continue

@DeprecatedSince("5.0-3")
def main():
    """ Needs pid mask set on launch """
    thread = threading.Thread(target=_taskset, args=())
    thread.daemon = False
    thread.start()
</pre>
</div>
</div>
</div>

<div id="outline-container-orgce8e4d6" class="outline-3">
<h3 id="orgce8e4d6">Fallout New Vegas (audio/vk issues)</h3>
<div class="outline-text-3" id="text-orgce8e4d6">
<div class="org-src-container">
<pre class="src src-python" id="org457d4af">""" Game fix for Fallout: New Vegas
"""
# pylint: disable=C0103
from protonfixes import util
from protonfixes.protonversion import DeprecatedSince

@DeprecatedSince("5.0-3")
def main():
    """ Use D3D9, quartz for audio, disable AA &amp; water reflections/refractions
    """
    # DX9 game
    util.disable_dxvk()

    # quartz for audio
    util.protontricks('quartz')

    # Graphics and HUD glitches when
    # AntiAliasing and Water Reflections/Refractions are enabled
    # https://github.com/ValveSoftware/Proton/issues/356
    user_opts = '''
    [Display]
    iMultiSample=0

    [Water]
    bUseWaterReflections=0
    bUseWaterRefractions=0
    '''
    util.set_ini_options(user_opts, 'My Games/FalloutNV/FalloutPrefs.ini')
</pre>
</div>
</div>
</div>
</div>
</div>
</body>
</html>
